@model VendorListViewModel
@if (Model.DeletedVendorId != null)
{
    <last-action-message-undo deleted-vendor-id="(int)@Model.DeletedVendorId" />
}
@{
    ViewData["Title"] = "List of Vendors";
    int buttonOffest = 4;
}
@*<div class="alert alert-success alert-dismissible fade show text-nowrap" role="alert">
    <div class="align-items-center d-inline-flex">
        <span class="p-1">This is a message</span>
        <form asp-controller="Vendor" asp-action="UndoDelete" method="post" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="id" value="@Model.DeletedVendorId" />
            <button type="submit" class="btn btn-primary p-1" data-bs-dismiss="alert" aria-label="Undo">Undo</button>
        </form>
    </div>
    <div><button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>
</div>*@
<div class="text-center">
    <div class="d-flex justify-content-center">
         
        <div class="m-1">
            <a class="btn btn-outline-secondary
                @((Model.startingLetter == "A" && Model.endingLetter == "Z" ) ? "active" : "")" asp-controller="Vendor" asp-action="GetVendorList" asp-route-startingLetter="A" asp-route-endingLetter="Z">
                All
            </a>
        </div>

        @for (int i = 0; i < 5; i++)
        {
            string startingLetter = ((char)((i * buttonOffest) + 65)).ToString();
            string endingLetter;

            if (i < 5 - 1)
            {
                endingLetter = ((char)(((i + 1) * buttonOffest) + 65)).ToString();
            }
            else
            {
                endingLetter = ((char)90).ToString();
            }
            <div class="m-1">
                <a class="btn btn-outline-secondary @((startingLetter == Model.startingLetter && endingLetter == Model.endingLetter) ? "active" : "")"
               asp-controller="Vendor" asp-action="GetVendorList" asp-route-startingLetter="@startingLetter" asp-route-endingLetter="@endingLetter">
                    @startingLetter - @endingLetter
                </a>
            </div>
        }
        
        <div class="m-1">
            <a class="btn btn-primary bd-highlight" asp-controller="Vendor" asp-action="GetAddVendor"
               asp-route-startingLetter="@Model.startingLetter" asp-route-endingLetter="@Model.endingLetter">
                Add New Vendor
            </a>
        </div>

    </div>
</div>
<div>
    <table class="table table-hover">
        <thead>
            <tr class="text-center">
                <th scope="col" class="text-nowrap">#</th>
                <th scope="col" class="text-nowrap">Name</th>
                <th scope="col" class="text-nowrap">Vendor Contact<br/>Last Name</th>
                <th scope="col" class="text-nowrap">Vendor Contact<br/>First Name</th>
                <th scope="col" class="text-nowrap">Vendor Contact Email</th>
                <th scope="col" class="text-nowrap">Vendor Phone</th>
                <th scope="col" class="text-nowrap">Invoices</th>
                <th scope="col" class="text-nowrap">Edit</th>
                <th scope="col" class="text-nowrap">Delete</th>
                <th scope="col" class="text-nowrap"></th>
            </tr>
        </thead>
        <tbody>
        <tbody>
            @if (Model.vendors != null)
            {
                @for(int i = 0; i < Model.vendors.Count; i++)
                {
                    @if (!Model.vendors.ElementAt(i).IsDeleted)
                    {
                        <tr scope="row">
                            <td>@(i + 1)</td>
                            <td>@Model.vendors.ElementAt(i).Name</td>
                            <td class="text-center">@Model.vendors.ElementAt(i).VendorContactLastName</td>
                            <td class="text-center">@Model.vendors.ElementAt(i).VendorContactFirstName</td>
                            <td>@Model.vendors.ElementAt(i).VendorContactEmail</td>
                            <td class="text-nowrap text-center">@Model.vendors.ElementAt(i).VendorPhone</td>
                            <td class="text-center">
                                <div>
                                    <a asp-controller="Vendor" asp-action="GetInvoicesForVendor" asp-route-vendorId="@Model.vendors.ElementAt(i).VendorId"
                                    asp-route-startingLetter="@Model.startingLetter" asp-route-endingLetter="@Model.endingLetter" class="btn btn-primary">Invoices</a>
                                </div>
                            </td>
                            <td class="text-center">
                                <div>
                                    <a asp-controller="Vendor" asp-action="GetEditVendor" asp-route-id="@Model.vendors.ElementAt(i).VendorId" 
                                    asp-route-startingLetter="@Model.startingLetter" asp-route-endingLetter="@Model.endingLetter" 
                                    class="btn btn-outline-primary">Edit</a>
                                </div>
                            </td>
                            <td class="text-center">
                                <form id="vendorDeleteRequest-@i" asp-controller="Vendor" asp-action="Delete" asp-route-id="@Model.vendors.ElementAt(i).VendorId"
                                      method="post" enctype="application/x-www-form-urlencoded">
                                    <button class="btn btn-outline-danger" type="submit" onclick="event.preventDefault(); document.getElementById('vendorDeleteRequest-@i').submit();">
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                    }
                    else
                    {

                    }
                }
            }
        </tbody>
    </table>
</div>
